@using Microsoft.AspNetCore.Authorization
@inject IAuthorizationService AuthorizationService

@if ((await AuthorizationService.AuthorizeAsync(User, "顶级权限")).Succeeded)
{
    <ul class="cm-menu-items">
        <li><a asp-area="" asp-controller="Map" asp-action="Map" class="sf-house" onclick="down()">主界面</a></li>
        
        <li id="xxfwButton" class="cm-submenu">
            <a  id="xxfw1" class="sf-search">信息服务<span class="caret"></span></a>
            <ul>
                <li><a href="###" onclick="toggleWindow('poi')" id="sjcx">数据查询</a></li>
                <li><a href="###" onclick="toggleWindow('poiTJ')" id="sjtj">数据统计</a></li>
            </ul>
        </li>
        <li id="jjxm" class="cm-submenu">
            <a id="jjxm1" class="sf-notepad">基建项目<span class="caret"></span></a>
            <ul>
                <li><a href="###" onclick="toggleWindow('jjcx')" id="jjcx">基建查询</a></li>
                <li><a href="###" onclick="toggleWindow('jjlr')" id="jjlr">基建录入</a></li>
            </ul>
        </li>
        <li id="wxxm" class="cm-submenu">
            <a id="wxxm1" class="sf-wrench-screwdriver">维修项目<span class="caret"></span></a>
            <ul>
                <li><a href="###" onclick="toggleWindow('wxcx')" id="wxcx">维修查询</a></li>
                <li><a href="###" onclick="toggleWindow('wxlr')" id="wxlr">维修上报</a></li>
            </ul>
        </li>
        <li id="gxfw"><a id="gxfw1" onclick="toggleWindow('ewgx')" class="sf-database">管线服务</a></li>
        <li class="cm-submenu">
            <a  class="sf-user-male">用户管理<span class="caret"></span></a>
            <ul>
                <li class="cjzh"><a  asp-area="" asp-controller="Users" asp-action="UserCreate" onclick="up()" >创建账号</a></li>
                <li><a asp-area="" asp-controller="Users" asp-action="UserManage">账号管理</a></li>
            </ul>
        </li>
    </ul>
}

@if ((await AuthorizationService.AuthorizeAsync(User, "维修权限")).Succeeded)
{
    <ul class="cm-menu-items">
        <li><a asp-area="" asp-controller="Map" asp-action="Map" class="sf-house">主界面</a></li>
        <li class="cm-submenu">
            <a class="sf-search">信息服务<span class="caret"></span></a>
            <ul>
                <li><a href="###" onclick="toggleWindow('poi')" id="sjcx">数据查询</a></li>
                <li><a href="###" onclick="toggleWindow('poiTJ')" id="sjtj">数据统计</a></li>
            </ul>
        </li>
        <li class="cm-submenu">
            <a class="sf-wrench-screwdriver">维修项目<span class="caret"></span></a>
            <ul>
                <li><a href="###" onclick="toggleWindow('wxcx')" id="wxcx">维修查询</a></li>
                <li><a href="###" onclick="toggleWindow('wxlr')" id="wxlr">维修上报</a></li>
            </ul>
        </li>
    </ul>
}


@if ((await AuthorizationService.AuthorizeAsync(User, "基建权限")).Succeeded)
{
    <ul class="cm-menu-items">
        <li><a asp-area="" asp-controller="Map" asp-action="Map" class="sf-house">主界面</a></li>
        <li class="cm-submenu">
            <a class="sf-search">信息服务<span class="caret"></span></a>
            <ul>
                <li><a href="###" onclick="toggleWindow('poi')" id="sjcx">数据查询</a></li>
                <li><a href="###" onclick="toggleWindow('poiTJ')" id="sjtj">数据统计</a></li>
            </ul>
        </li>
        <li class="cm-submenu">
            <a class="sf-notepad">基建项目<span class="caret"></span></a>
            <ul>
                <li><a href="###" onclick="toggleWindow('jjcx')" id="jjcx">基建查询</a></li>
                <li><a href="###" onclick="toggleWindow('jjlr')" id="jjlr">基建录入</a></li>
            </ul>
        </li>
    </ul>
}


@if ((await AuthorizationService.AuthorizeAsync(User, "管线权限")).Succeeded)
{
    <ul class="cm-menu-items">
        <li><a asp-area="" asp-controller="Map" asp-action="Map" class="sf-house">主界面</a></li>
        <li class="cm-submenu">
            <a class="sf-search">信息服务<span class="caret"></span></a>
            <ul>
                <li><a href="###" onclick="toggleWindow('poi')" id="sjcx">数据查询</a></li>
                <li><a href="###" onclick="toggleWindow('poiTJ')" id="sjtj">数据统计</a></li>
            </ul>
        </li>
        <li><a onclick="toggleWindow('ewgx')" class="sf-database">管线服务</a></li>
    </ul>
}

@if (!(await AuthorizationService.AuthorizeAsync(User, "管线权限")).Succeeded && !(await AuthorizationService.AuthorizeAsync(User, "基建权限")).Succeeded && !(await AuthorizationService.AuthorizeAsync(User, "顶级权限")).Succeeded && !(await AuthorizationService.AuthorizeAsync(User, "维修权限")).Succeeded)
{
    <ul class="cm-menu-items">
        <li><a asp-area="" asp-controller="Map" asp-action="Map" class="sf-house">主界面</a></li>
        <li class="cm-submenu">
            <a class="sf-search">信息服务<span class="caret"></span></a>
            <ul>
                <li><a href="###" onclick="toggleWindow('poi')" id="sjcx">数据查询</a></li>
                <li><a href="###" onclick="toggleWindow('poiTJ')" id="sjtj">数据统计</a></li>
            </ul>
        </li>
    </ul>
}
